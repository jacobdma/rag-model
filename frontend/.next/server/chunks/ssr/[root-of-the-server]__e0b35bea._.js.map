{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/jma/rag_model/ihi-llm-ui/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useRef, useEffect } from \"react\"\nimport { Search, Send } from \"lucide-react\"\n\ntype Message = {\n  role: \"user\" | \"assistant\"\n  content: string\n}\n\nexport default function Chat() {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [input, setInput] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [useWebSearch, setUseWebSearch] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!input.trim()) return\n\n    // Add user message to chat\n    const userMessage: Message = { role: \"user\", content: input }\n    setMessages((prev) => [...prev, userMessage])\n    setInput(\"\")\n    setIsLoading(true)\n\n    try {\n      // Send request to API\n      console.log(JSON.stringify({ query: userMessage.content, history: messages }));\n\n      const response = await fetch(\"http://localhost:8000/query\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          query: userMessage.content,\n          history: messages,\n          use_web_search: useWebSearch,\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Failed to get response\")\n      }\n\n      const data = await response.json()\n\n      // Add assistant response to chat\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          content: data.response || \"Sorry, I couldn't process that request.\",\n        },\n      ])\n    } catch (error) {\n      console.error(\"Error:\", error)\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          content: \"Sorry, there was an error processing your request.\",\n        },\n      ])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"bg-gray-200 font-sans\">\n      <div className=\"flex flex-col h-screen max-w-2xl mx-auto p-4\">\n        <h1 className=\"font-bold text-gray-700 text-3xl text-center mb-4\">IHI Chatbot</h1>\n\n        {messages.length === 0 ? (\n          // Centered layout when no messages\n          <div className=\"flex-1 flex flex-col justify-center items-center gap-8\">\n            <p className=\"font-bold text-gray-500 text-2xl text-center\">What can I help you with?</p>\n\n            <form onSubmit={handleSubmit} className=\"flex gap-2 w-full max-w-md\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                placeholder=\"Type your message...\"\n                className=\"flex-1 p-2 pl-3 border border-gray-300 bg-white rounded-full focus:outline-none\"\n                disabled={isLoading}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setUseWebSearch(!useWebSearch)}\n                className={`p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white ${\n                  useWebSearch ? \"bg-gray-700 text-white\" : \"bg-white text-gray-700 border border-gray-300\"\n                }`}\n                title={useWebSearch ? \"Web search enabled\" : \"Web search disabled\"}\n              >\n                <Search size={20} />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading || !input.trim()}\n                className=\"bg-gray-900 text-white px-4 py-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-white disabled:bg-gray-500\"\n              >\n                <Send size={20} />\n              </button>\n            </form>\n          </div>\n        ) : (\n          // Regular chat layout when messages exist\n          <>\n            <div className=\"flex-1 overflow-y-auto mb-4 p-4 rounded-lg flex flex-col\">\n              {messages.map((message, index) => (\n                <div key={index} className={`mb-4 ${message.role === \"user\" ? \"text-right\" : \"text-left\"}`}>\n                  <div\n                    className={`inline-block px-4 py-2 rounded-lg ${\n                      message.role === \"user\"\n                        ? \"bg-white text-gray-800 rounded-br-none max-w-[80%]\"\n                        : \"bg-gray-300 text-gray-800 rounded-bl-none max-w-[100%]\"\n                    }`}\n                  >\n                    {message.content}\n                  </div>\n                </div>\n              ))}\n              {isLoading && (\n                <div className=\"text-left mb-4\">\n                  <div className=\"inline-block px-4 py-2 rounded-lg bg-gray-300 text-gray-800 rounded-bl-none\">\n                    <div className=\"flex space-x-1\">\n                      <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"></div>\n                      <div\n                        className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"\n                        style={{ animationDelay: \"0.2s\" }}\n                      ></div>\n                      <div\n                        className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"\n                        style={{ animationDelay: \"0.4s\" }}\n                      ></div>\n                    </div>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">Assistant is typing...</div>\n                </div>\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"flex gap-2 w-full\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                placeholder=\"Type your message...\"\n                className=\"flex-1 p-2 pl-3 border border-gray-300 bg-white rounded-full focus:outline-none\"\n                disabled={isLoading}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setUseWebSearch(!useWebSearch)}\n                className={`p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white ${\n                  useWebSearch ? \"bg-gray-700 text-white\" : \"bg-white text-gray-700 border border-gray-300\"\n                }`}\n                title={useWebSearch ? \"Web search enabled\" : \"Web search disabled\"}\n              >\n                <Search size={20} />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading || !input.trim()}\n                className=\"bg-gray-900 text-white px-4 py-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-white disabled:bg-gray-500\"\n              >\n                <Send size={20} />\n              </button>\n            </form>\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/jma/rag_model/ihi-llm-ui/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/jma/rag_model/ihi-llm-ui/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/jma/rag_model/ihi-llm-ui/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}